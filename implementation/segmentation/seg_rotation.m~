function [ B ] = seg_rotation( A ,th)

A = im2bw(A, 0.4);
A = imcomplement(A);
minimumDensity = inf;
optimalAngle = 0;
optimalDensities = zeros(size(A,2));

for angle= -2:1:2
    rotImage = imrotate(A,angle);
    densities = sum(rotImage,1);
    figure('name',);
    title(num2str(angle));
    plot(1:size(densities,2),densities);
    densities(densities > th) = 0;
    if(sum(densities) < minimumDensity)
        optimalAngle = angle;
        optimalDensities = densities;
    end
end
optimalDensities
B = imcomplement(imrotate(A,optimalAngle));
end

